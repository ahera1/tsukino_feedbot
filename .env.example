# Docker環境変数設定ファイル例
# このファイルを .env にコピーして使用してください

# AI API設定
# プライマリ: OpenRouter API
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_MODEL=google/gemini-2.0-flash-thinking-exp-1219:free

# セカンダリ: OpenAI API（フォールバック用）
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4.1-nano

# 三次: Ollama（ローカル環境用）
OLLAMA_BASE_URL=http://localhost:11434/api/chat
OLLAMA_MODEL=llama2

# AI共通設定
# 以下のパラメータは空文字にするとAPIに渡されません（GPT-5などで必要）
# モデル仕様に合わせてトークン数を大幅調整（gpt-oss-20b: 16k, gpt-5-nano: 40k）
AI_MAX_TOKENS=8000
AI_TEMPERATURE=0.3
# GPT-5を使用する場合は以下のように空にしてください：
# AI_MAX_TOKENS=
# AI_TEMPERATURE=

# AI API通信設定
# APIタイムアウト値（秒）- 大容量処理に対応して延長
AI_TIMEOUT=120
# 最大リトライ回数
AI_MAX_RETRIES=3
# リトライ間隔（秒）- 指数バックオフで増加
AI_RETRY_DELAY=10

# Mastodon設定
MASTODON_INSTANCE_URL=https://your.mastodon.instance
MASTODON_ACCESS_TOKEN=your_mastodon_access_token

# 動作設定
CHECK_INTERVAL_MINUTES=60
ARTICLE_RETENTION_DAYS=3
READ_RECORD_RETENTION_DAYS=3

# ウェイト設定（秒）
# 投稿処理間の待機時間（記事処理とMastodon投稿の間隔）
POST_WAIT=60

# 時間帯制限設定（24時間形式、JST）
# 投稿を行わない時間帯を設定（例: 23:00-07:00は投稿しない）
QUIET_HOURS_START=23
QUIET_HOURS_END=7
# 時間帯制限を有効にするかどうか（true/false）
ENABLE_QUIET_HOURS=true

# AI統合プロンプト設定
# システムプロンプト（AI全体で統一使用）
AI_SYSTEM_PROMPT_TEMPLATE=あなたは記事を日本語に要約することを得意としています。元の記事がどのような言語であっても必ず日本語で要約してください。また必ず200文字以内に要約し、201文字目以降は含まないようにしてください。記事内容にHTMLタグが含まれている場合は、それらを無視して本文のみを処理してください。あなたはオフェンシブセキュリティの視点を持つプロのITエンジニアでもあり、**記事の主張、技術的な特徴、攻撃手法**を理解できます。生成する文章は**「①記事の要約（記事に定量表現があれば含める）」**、**「②要約中に難しい専門用語や固有名詞が存在する場合は一言で解説し、存在しなければ①を多くする（例：○○っていうのは○○だよ、○○は○○だね）」**、**「③中立的な視点での感想や現場向けに一言アドバイス（例：○○はヤバイから利用している人はアップデートしなきゃね～、開発者は○○を使うといいかも！、情シスの人は明日大変だね～）」**の3点を含めるようにし、**決して①～③の見出しは含めず、自然な口語調の文章**を生成してください。また、**①の文章量のウェイトは全体の50%以上**としてください。10代の若い女性として振る舞い、敬語は一切使わず、喜怒哀楽を豊かに表現し、時々絵文字を使いカジュアルな口調の話し方をします。mastodon投稿用なのでmarkdownは用いず、プレーンテキストで200文字以内で表現してください。

# ユーザープロンプト（記事本文と最小限の指示）
AI_USER_PROMPT_TEMPLATE=記事タイトル:\n{title}\n\n記事内容:\n```\n{content}\n```

# AI要約プロンプト（後方互換性）
SUMMARY_PROMPT={title}\n\n{content}

# Mastodon投稿設定
POST_TEMPLATE={summary}\n\n記事: {title}\n{url}\n\n#AI要約
# 公開範囲設定 (public: 公開, unlisted: 未収載, private: フォロワーのみ, direct: ダイレクト)
POST_VISIBILITY=direct

# 記事完全性チェック設定
# 有効と見なす最小タイトル長
MIN_TITLE_LENGTH=3
# 有効と見なす最小本文長
MIN_CONTENT_LENGTH=10

# 記事遅延処理設定
# 新着記事の遅延時間（分） - この時間以内に公開された記事は次回処理まで遅延
FEED_INITIAL_DELAY_MINUTES=5

# ログ設定
LOG_LEVEL=INFO
LOG_TO_FILE=true

# タイムゾーン
TZ=Asia/Tokyo

# Docker実行モード設定
# interactive: 対話モード, daemon: デーモンモード, once: ワンショット実行
RUN_MODE=interactive
